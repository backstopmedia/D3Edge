 <pre><code style="display: block; padding: 0.5em; background-color: #f4f4f4; font-size: 0.75em; color: black;"><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">001:</span><span class="comment" style="color: #777;">//&nbsp;Bar&nbsp;chart&nbsp;Module</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">002:</span><span class="comment" style="color: #777;">/////////////////////////////////</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">003:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">004:</span>d3.custom&nbsp;=&nbsp;{};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">005:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">006:</span>d3.custom.barChart&nbsp;=&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">module</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">007:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;margin&nbsp;=&nbsp;{top:&nbsp;<span class="number" style="color: #800;">20</span>,&nbsp;right:&nbsp;<span class="number" style="color: #800;">20</span>,&nbsp;bottom:&nbsp;<span class="number" style="color: #800;">40</span>,&nbsp;left:&nbsp;<span class="number" style="color: #800;">40</span>},<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">008:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;=&nbsp;<span class="number" style="color: #800;">500</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">009:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;=&nbsp;<span class="number" style="color: #800;">500</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">010:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gap&nbsp;=&nbsp;<span class="number" style="color: #800;">0</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">011:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ease&nbsp;=&nbsp;<span class="string" style="color: #050;">"bounce"</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">012:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;svg;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">013:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">014:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;dispatch&nbsp;=&nbsp;d3.dispatch(<span class="string" style="color: #050;">"customHover"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">015:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">exports</span><span class="params">(_selection)</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">016:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_selection.each(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_data)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">017:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;chartW&nbsp;=&nbsp;width&nbsp;-&nbsp;margin.left&nbsp;-&nbsp;margin.right,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">018:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chartH&nbsp;=&nbsp;height&nbsp;-&nbsp;margin.top&nbsp;-&nbsp;margin.bottom;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">019:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">020:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;x1&nbsp;=&nbsp;d3.scale.ordinal()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">021:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.domain(_data.map(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;i;&nbsp;}))<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">022:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.rangeRoundBands([<span class="number" style="color: #800;">0</span>,&nbsp;chartW],&nbsp;<span class="number" style="color: #800;">.1</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">023:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">024:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;y1&nbsp;=&nbsp;d3.scale.linear()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">025:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.domain([<span class="number" style="color: #800;">0</span>,&nbsp;d3.max(_data,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;d;&nbsp;})])<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">026:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.range([chartH,&nbsp;<span class="number" style="color: #800;">0</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">027:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">028:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;xAxis&nbsp;=&nbsp;d3.svg.axis()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">029:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.scale(x1)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">030:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.orient(<span class="string" style="color: #050;">"bottom"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">031:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">032:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;yAxis&nbsp;=&nbsp;d3.svg.axis()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">033:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.scale(y1)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">034:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.orient(<span class="string" style="color: #050;">"left"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">035:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">036:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;barW&nbsp;=&nbsp;chartW&nbsp;/&nbsp;_data.length;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">037:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">038:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!svg)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">039:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg&nbsp;=&nbsp;d3.select(<span class="keyword" style="font-weight: bold; color: navy;">this</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">040:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(<span class="string" style="color: #050;">"svg"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">041:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.classed(<span class="string" style="color: #050;">"chart"</span>,&nbsp;<span class="literal" style="color: #800;">true</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">042:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;container&nbsp;=&nbsp;svg.append(<span class="string" style="color: #050;">"g"</span>).classed(<span class="string" style="color: #050;">"container-group"</span>,&nbsp;<span class="literal" style="color: #800;">true</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">043:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container.append(<span class="string" style="color: #050;">"g"</span>).classed(<span class="string" style="color: #050;">"chart-group"</span>,&nbsp;<span class="literal" style="color: #800;">true</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">044:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container.append(<span class="string" style="color: #050;">"g"</span>).classed(<span class="string" style="color: #050;">"x-axis-group&nbsp;axis"</span>,&nbsp;<span class="literal" style="color: #800;">true</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">045:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container.append(<span class="string" style="color: #050;">"g"</span>).classed(<span class="string" style="color: #050;">"y-axis-group&nbsp;axis"</span>,&nbsp;<span class="literal" style="color: #800;">true</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">046:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">047:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">048:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.transition().attr({width:&nbsp;width,&nbsp;height:&nbsp;height});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">049:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.select(<span class="string" style="color: #050;">".container-group"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">050:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({transform:&nbsp;<span class="string" style="color: #050;">"translate("</span>&nbsp;+&nbsp;margin.left&nbsp;+&nbsp;<span class="string" style="color: #050;">","</span>&nbsp;+&nbsp;margin.top&nbsp;+&nbsp;<span class="string" style="color: #050;">")"</span>});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">051:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">052:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.select(<span class="string" style="color: #050;">".x-axis-group.axis"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">053:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.transition()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">054:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ease(ease)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">055:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({transform:&nbsp;<span class="string" style="color: #050;">"translate(0,"</span>&nbsp;+&nbsp;(chartH)&nbsp;+&nbsp;<span class="string" style="color: #050;">")"</span>})<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">056:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(xAxis);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">057:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">058:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.select(<span class="string" style="color: #050;">".y-axis-group.axis"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">059:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.transition()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">060:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ease(ease)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">061:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(yAxis);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">062:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">063:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;gapSize&nbsp;=&nbsp;x1.rangeBand()&nbsp;/&nbsp;<span class="number" style="color: #800;">100</span>&nbsp;*&nbsp;gap;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">064:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;barW&nbsp;=&nbsp;x1.rangeBand()&nbsp;-&nbsp;gapSize;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">065:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;bars&nbsp;=&nbsp;svg.select(<span class="string" style="color: #050;">".chart-group"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">066:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.selectAll(<span class="string" style="color: #050;">".bar"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">067:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.data(_data);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">068:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bars.enter().append(<span class="string" style="color: #050;">"rect"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">069:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.classed(<span class="string" style="color: #050;">"bar"</span>,&nbsp;<span class="literal" style="color: #800;">true</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">070:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({x:&nbsp;chartW,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">071:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;barW,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">072:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y:&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;y1(d);&nbsp;},<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">073:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;chartH&nbsp;-&nbsp;y1(d);&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">074:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">075:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.on(<span class="string" style="color: #050;">"mouseover"</span>,&nbsp;dispatch.customHover);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">076:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bars.transition()<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">077:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ease(ease)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">078:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.attr({<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">079:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;barW,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">080:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x:&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;x1(i)&nbsp;+&nbsp;gapSize&nbsp;/&nbsp;<span class="number" style="color: #800;">2</span>;&nbsp;},<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">081:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y:&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;y1(d);&nbsp;},<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">082:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;chartH&nbsp;-&nbsp;y1(d);&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">083:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">084:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bars.exit().transition().style({opacity:&nbsp;<span class="number" style="color: #800;">0</span>}).remove();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">085:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">086:</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">087:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.width&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">088:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;width;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">089:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;=&nbsp;parseInt(_x);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">090:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">091:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">092:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.height&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">093:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;height;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">094:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;=&nbsp;parseInt(_x);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">095:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">096:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">097:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.gap&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">098:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;gap;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">099:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gap&nbsp;=&nbsp;_x;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">100:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">101:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">102:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.ease&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">103:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;ease;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">104:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ease&nbsp;=&nbsp;_x;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">105:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">106:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">107:</span>&nbsp;&nbsp;&nbsp;&nbsp;d3.rebind(exports,&nbsp;dispatch,&nbsp;<span class="string" style="color: #050;">"on"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">108:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;exports;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">109:</span>};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">110:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">111:</span><span class="comment" style="color: #777;">//&nbsp;Usage</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">112:</span><span class="comment" style="color: #777;">/////////////////////////////////</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">113:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">114:</span><span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;chart&nbsp;=&nbsp;d3.custom.barChart();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">115:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">116:</span><span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">update</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">117:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;data&nbsp;=&nbsp;randomDataset();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">118:</span>&nbsp;&nbsp;&nbsp;&nbsp;d3.select(<span class="string" style="color: #050;">"#figure"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">119:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.datum(data)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">120:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(chart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">121:</span>}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">122:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">123:</span><span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">randomDataset</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">124:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;d3.range(~~(Math.random()&nbsp;*&nbsp;<span class="number" style="color: #800;">50</span>)).map(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">125:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;~~(Math.random()&nbsp;*&nbsp;<span class="number" style="color: #800;">1000</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">126:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">127:</span>}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">128:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">129:</span>update();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">130:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">131:</span>setInterval(update,&nbsp;<span class="number" style="color: #800;">1000</span>);</code></pre> 
